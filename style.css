:root {
    /* Elite Palette */
    --bg-deep: #000000;
    --bg-subtle: #1c1c1e;
    --glass: rgba(28, 28, 30, 0.75);
    --glass-heavy: rgba(44, 44, 46, 0.9);
    --border: rgba(255, 255, 255, 0.1);
    --border-light: rgba(255, 255, 255, 0.15);
    
    --primary: #64D2FF; /* iOS Teal/Blue - Clean */
    --primary-dim: rgba(100, 210, 255, 0.15);
    --danger: #FF453A;
    --success: #30D158;
    
    --text-main: #FFFFFF;
    --text-sec: #EBEBF5;
    --text-ter: #8E8E93;
    
    --font: 'Rubik', -apple-system, sans-serif;
    --radius: 16px;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }

body {
    margin: 0; padding: 0;
    font-family: var(--font);
    background: var(--bg-deep); color: var(--text-main);
    height: 100vh; overflow: hidden;
    direction: rtl;
    font-size: 16px;
}

/* Background */
.bg-atmosphere {
    position: fixed; inset: 0; z-index: -1;
    background: radial-gradient(circle at 50% -20%, #1a1a20 0%, #000000 70%);
}

/* Layout */
.app-container {
    height: 100%; display: flex; flex-direction: column;
    padding: calc(env(safe-area-inset-top) + 10px) 20px calc(env(safe-area-inset-bottom) + 10px);
}

.spacer { flex: 1; }

/* Navbar */
.navbar { display: flex; justify-content: space-between; align-items: center; min-height: 44px; margin-bottom: 20px; }
.logo-text { font-weight: 700; font-size: 1.2rem; letter-spacing: 0.5px; color: var(--text-main); }
.icon-btn-plain { background: none; border: none; color: var(--primary); font-size: 1rem; cursor: pointer; padding: 5px; }

/* Screens */
.screen { display: none; flex-direction: column; flex: 1; overflow-y: auto; padding-bottom: 20px; animation: fadeIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); }
.screen.active { display: flex; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

/* Typography */
h1, h2, h3 { margin: 0; font-weight: 600; }
.page-title { font-size: 2rem; margin-bottom: 20px; letter-spacing: -0.5px; }

/* Buttons - Elite Style */
.btn-primary {
    background: var(--text-main); color: #000;
    border: none; border-radius: 14px;
    padding: 18px; font-weight: 600; font-size: 1.05rem;
    width: 100%; cursor: pointer; transition: opacity 0.2s;
}
.btn-primary:active { opacity: 0.8; }

.btn-secondary {
    background: rgba(255,255,255,0.1); color: var(--text-main);
    border: none; border-radius: 14px;
    padding: 16px; font-weight: 500; font-size: 1rem;
    width: 100%; cursor: pointer; transition: background 0.2s;
}
.btn-secondary:active { background: rgba(255,255,255,0.2); }

.btn-destructive {
    background: rgba(255, 69, 58, 0.15); color: var(--danger);
    border: none; border-radius: 14px; padding: 16px; font-weight: 500; width: 100%;
}

.text-link { background: none; border: none; color: var(--text-ter); font-size: 0.9rem; padding: 10px; cursor: pointer; }

/* Cards & Lists (iOS Style) */
.glass-card {
    background: var(--glass); backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
    border: 0.5px solid var(--border); border-radius: var(--radius); padding: 20px;
}

.ios-list {
    background: var(--bg-subtle);
    border-radius: 12px;
    overflow: hidden;
    display: flex; flex-direction: column;
}

.list-row-clickable, .admin-item, .hist-item-row {
    padding: 16px; display: flex; justify-content: space-between; align-items: center;
    background: var(--bg-subtle);
    border-bottom: 0.5px solid #2c2c2e;
    cursor: pointer; transition: background 0.2s;
}
.list-row-clickable:last-child, .admin-item:last-child { border-bottom: none; }
.list-row-clickable:active { background: #3a3a3c; }

.row-title { font-weight: 500; font-size: 1.05rem; display: block; }
.row-subtitle { font-size: 0.85rem; color: var(--text-ter); margin-top: 2px; display: block; }
.row-arrow { color: var(--text-ter); font-size: 1.2rem; }

/* Home */
.home-header { margin-bottom: 30px; }
.home-header p { color: var(--text-ter); margin-top: 4px; font-size: 1rem; }
.label-dim { color: var(--text-ter); font-size: 0.9rem; }
.value-highlight { color: var(--text-main); font-weight: 500; font-family: 'Rubik', sans-serif; }
.row-spread { display: flex; justify-content: space-between; align-items: center; }

/* Active Workout - Instrument Cluster */
.active-header { text-align: center; margin-bottom: 20px; }
.capsule-badge { font-size: 0.8rem; background: var(--border); padding: 4px 10px; border-radius: 20px; color: var(--text-sec); display: inline-block; margin-bottom: 8px; }
#ex-name { font-size: 1.6rem; font-weight: 700; }
.note-text { color: var(--primary); font-size: 0.9rem; margin-top: 6px; }
.history-text { text-align: center; color: var(--text-ter); font-size: 0.85rem; margin-bottom: 30px; }

/* DATA INPUTS (Clean) */
.inputs-row { display: flex; justify-content: center; align-items: center; margin-bottom: 30px; gap: 40px; }
.data-input-wrapper { display: flex; flex-direction: column; align-items: center; position: relative; width: 100px; }
.minimal-select {
    appearance: none; background: transparent; border: none;
    color: var(--text-main); font-size: 3.5rem; font-weight: 200;
    font-family: 'Rubik', sans-serif; text-align: center; width: 100%;
    padding: 0; margin: 0; cursor: pointer;
}
.input-label { font-size: 0.9rem; color: var(--text-ter); margin-top: -5px; text-transform: uppercase; letter-spacing: 1px; }
.divider-vertical { width: 1px; height: 60px; background: var(--border); }

/* STOPWATCH (Floating) */
.stopwatch-wrapper { display: flex; flex-direction: column; align-items: center; margin-bottom: 30px; }
.stopwatch-digits { font-size: 5.5rem; font-weight: 200; font-variant-numeric: tabular-nums; letter-spacing: -2px; line-height: 1; }
.btn-play-pause {
    background: var(--bg-subtle); width: 70px; height: 70px; border-radius: 50%;
    border: none; display: flex; align-items: center; justify-content: center;
    margin-top: 20px; cursor: pointer; color: var(--text-main);
    transition: transform 0.2s, background 0.2s;
}
.btn-play-pause:active { transform: scale(0.95); background: #3a3a3c; }
.btn-play-pause.running { color: var(--primary); background: rgba(100, 210, 255, 0.1); }
.play-icon, .stop-icon { width: 28px; height: 28px; }

/* SEGMENT CONTROL (Feeling) */
.feeling-container { display: flex; justify-content: center; margin-bottom: 20px; }
.segment-control {
    background: #2c2c2e; border-radius: 10px; padding: 3px; display: flex;
}
.segment-btn {
    background: transparent; border: none; color: var(--text-ter);
    padding: 8px 24px; font-size: 0.9rem; cursor: pointer; border-radius: 8px; font-weight: 500;
}
.segment-btn.selected { background: #636366; color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }

/* REST TIMER (Minimal) */
.rest-overlay { position: fixed; bottom: 120px; left: 0; right: 0; display: flex; flex-direction: column; align-items: center; pointer-events: none; z-index: 10; }
.circular-timer-minimal { width: 80px; height: 80px; position: relative; background: rgba(0,0,0,0.6); border-radius: 50%; backdrop-filter: blur(10px); }
.circular-timer-minimal svg { width: 100%; height: 100%; transform: rotate(-90deg); }
.bg-ring { stroke: rgba(255,255,255,0.1); stroke-width: 4; fill: none; }
.prog-ring { stroke: var(--primary); stroke-width: 4; fill: none; stroke-dasharray: 283; stroke-linecap: round; transition: stroke-dashoffset 1s linear; }
.timer-text-minimal { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; font-family: monospace; font-weight: 600; }
.rest-label { font-size: 0.8rem; margin-top: 5px; color: var(--text-ter); text-shadow: 0 1px 2px black; }

/* Actions */
.action-dock { margin-top: auto; padding-top: 20px; }
.sub-actions-row { display: flex; justify-content: space-between; padding: 0 20px; }

/* Modals & Inputs */
.glass-input, .search-input, .native-select {
    background: #2c2c2e; border: none; color: white;
    padding: 12px; border-radius: 10px; width: 100%; font-size: 1rem;
}
.input-group label { display: block; font-size: 0.85rem; color: var(--text-ter); margin-bottom: 8px; margin-right: 4px; }
.actions-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
.admin-item { padding: 12px 16px; }
.admin-controls { padding-bottom: 15px; border-bottom: 0.5px solid #2c2c2e; margin-bottom: 15px; }
.btn-action-row { background: none; border: 1px dashed #3a3a3c; color: var(--text-sec); padding: 12px; border-radius: 10px; width: 100%; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
.plus-icon { font-size: 1.2rem; color: var(--primary); }

/* History Toolbar */
.toolbar { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 0.5px solid #2c2c2e; margin-bottom: 10px; }
.btn-toolbar { background: none; border: none; color: var(--primary); font-size: 0.95rem; cursor: pointer; }
.btn-toolbar.danger { color: var(--danger); }
.btn-toolbar:disabled { opacity: 0.3; }
.btn-small-text { background: none; border: none; color: var(--primary); font-size: 0.9rem; cursor: pointer; }

/* Checkbox (iOS Circle) */
.custom-chk {
    appearance: none; width: 22px; height: 22px;
    border: 1px solid var(--text-ter); border-radius: 50%;
    margin-left: 12px; position: relative; transition: 0.2s;
}
.custom-chk:checked { background: var(--primary); border-color: var(--primary); }
.custom-chk:checked::after { content: 'âœ“'; position: absolute; color: black; font-size: 14px; top: 50%; left: 50%; transform: translate(-50%, -50%); }

.summary-content { font-family: monospace; white-space: pre-wrap; font-size: 0.9rem; line-height: 1.5; color: var(--text-sec); background: var(--bg-subtle); padding: 15px; border-radius: 12px; margin-bottom: 20px; }
.summary-meta-tag { color: var(--text-ter); margin-top: 5px; font-size: 0.95rem; }
